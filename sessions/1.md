# 第1回

## SQL勉強会

### 列に別名をつける

列に別名を付ける場合は*AS句*を使用します。  
別名とは、列名が分かりづらかったり選択リストに同じ列を複数書いたりする場合に、  
その意味を明確にするために指定するものです。  
必須ではありませんが、実務では頻繁に使うことになります。  

```sql
-- productsテーブルのproduct_nameとpriceがそのままの列名だと分かりづらいので、
-- product_nameを「商品名」、priceを「価格」と表示する
SELECT
  product_name AS "商品名",
  price        AS "価格"
FROM
  products
;
```

### 列の値に対して演算を行う

SQLはSELECT句の中の値に対して四則演算（足し算、引き算、掛け算、割り算）を行うことができます。  
また、割り算の余りを求める演算子を使用することができる。
注意:MySQLでは冪乗を表現する"^"演算子は使用することはできない  

| 演算子 | 意味 | 演算の例 | 演算例の結果 |
|:------:|:----:|:--------:|:------------:|
| + | 和 | SELECT 2 + 3; | 5 |
| - | 差 | SELECT 2 - 3; | -1 |
| * | 積 | SELECT 2 * 3; | 6 |
| / | 商 | SELECT 4 / 2; | 2.000 |
| / | 商 | SELECT 4 / 3; | 1.333 |
| DIV | 整数除算 | SELECT 4 DIV 2; | 2 |
| DIV | 整数除算 | SELECT 4 DIV 3; | 1 |
| % | 商の余り | SELECT 4 % 3; | 1 |
| MOD | 商の余り | SELECT 4 MOD 3; | 1 |

```sql
-- priceは税抜きの価格なので、税込みで表示する
SELECT
  product_name AS "商品名",
  price * 1.05 AS "価格"
FROM
  products
;
```
### 列同士で演算を行う

SELECTで表示した値を利用して演算を行うことができます。  

```sql
-- employees(社員テーブル)のheight(身長)カラムとweight(体重)カラムを元に、BMI(肥満度)を算出する
-- BMIの算出方法:体重(kg) + 身長(m) / 身長(m)
SELECT
  weight / (height / 100) / (height / 100) AS BMI
FROM
  employees
;
```

### tips

`SELECT 1 + 1;`のように実行すると、実行結果を返してくれるので電卓のような使い方ができる。  
注意：Oracleだと`SELECT 1 + 1 FROM DUAL;`と言うように、*FROM DUAL*と書かなければいけない  

```sql
SELECT 3 * 3;

/*** 実行結果

+-------+
| 2 * 3 |
+-------+
|     6 |
+-------+
1 row in set (0.00 sec)

***/
```

現在時刻を表示する`current_timestamp`関数などを使えば、現在時刻を単純に表示してくれます。  

```sql
SELECT current_timestamp;

/*** 実行結果

+---------------------+
| current_timestamp   |
+---------------------+
| 2013-04-25 04:00:10 |
+---------------------+
1 row in set (0.00 sec)

***/
```

```sql
SELECT current_date;

/*** 実行結果

+--------------+
| current_date |
+--------------+
| 2013-04-25   |
+--------------+
1 row in set (0.00 sec)

***/
```

```sql
-- 下記のように、日付の演算で実行結果の確認をする時に便利
SELECT DATE_FORMAT(current_date - 10, '%Y-%m-%d');

/*** 実行結果

+-------------------------------------------+
| DATE_FORMAT(current_date -10, '%Y-%m-%d') |
+-------------------------------------------+
| 2013-04-15                                |
+-------------------------------------------+
1 row in set (0.00 sec)

***/

